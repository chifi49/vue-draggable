{"remainingRequest":"/Users/fisigma/.nvm/versions/node/v12.16.1/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fisigma/Documents/Amazon Photos Downloads/github-projects/vue-draggable/vue-draggable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fisigma/Documents/Amazon Photos Downloads/github-projects/vue-draggable/vue-draggable.vue","mtime":1605100329000},{"path":"/Users/fisigma/.nvm/versions/node/v12.16.1/lib/node_modules/@vue/cli-service-global/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fisigma/.nvm/versions/node/v12.16.1/lib/node_modules/@vue/cli-service-global/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fisigma/.nvm/versions/node/v12.16.1/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKZXhwb3J0IGRlZmF1bHR7CiAgICBuYW1lOid2dWUtZHJhZ2dhYmxlJywKICAgIHByb3BzOnsKICAgICAgICB0YWc6ewogICAgICAgICAgICByZXF1aXJlZDpmYWxzZSwKICAgICAgICAgICAgdHlwZTpTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6J3NwYW4nCiAgICAgICAgfSwKICAgICAgICB6aW5kZXg6ewogICAgICAgICAgICByZXF1aXJlZDpmYWxzZSwKICAgICAgICAgICAgdHlwZTpOdW1iZXIsCiAgICAgICAgICAgIGRlZmF1bHQ6MTAwIC8vd2hhdCB6LWluZGV4IHRvIHNldCB3aGlsZSBkcmFnZ2luZwogICAgICAgIH0sCiAgICAgICAgYXhpczp7CiAgICAgICAgICAgIHJlcXVpcmVkOmZhbHNlLAogICAgICAgICAgICB0eXBlOlN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDoneHknCiAgICAgICAgfSwKICAgICAgICBvZmZzZXQ6eyAvL2hvdyBtYW55IHBpeGVscyB0byBtb3ZlIHRvIGNvdW50IGl0IGFzIGRyYWdnaW5nCiAgICAgICAgICAgIHJlcXVpcmVkOmZhbHNlLAogICAgICAgICAgICB0eXBlOk51bWJlciwKICAgICAgICAgICAgZGVmYXVsdDoxMAogICAgICAgIH0sCiAgICAgICAgCiAgICAgICAgZHJhZ2hhbmRsZTp7CiAgICAgICAgICAgIHJlcXVpcmVkOmZhbHNlLAogICAgICAgICAgICB0eXBlOlN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDonJyAvL2Egc2VsZWN0b3IgZnJvbSB0aGUgc2xvdCBvciB0aGUgdGFyZ2V0CiAgICAgICAgfSwKICAgICAgICBjbG9uZTp7CiAgICAgICAgICAgIHJlcXVpcmVkOmZhbHNlLAogICAgICAgICAgICB0eXBlOkJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQ6ZmFsc2UKICAgICAgICB9LAogICAgICAgIGNsb25lX2VsZW1lbnQ6ewogICAgICAgICAgICByZXF1aXJlZDpmYWxzZSwKICAgICAgICAgICAgdHlwZTpGdW5jdGlvbiwKICAgICAgICAgICAgZGVmYXVsdDpudWxsCiAgICAgICAgfSwKICAgICAgICBjbG9uZV9vcGFjaXR5OnsKICAgICAgICAgICAgcmVxdWlyZWQ6ZmFsc2UsCiAgICAgICAgICAgIHR5cGU6TnVtYmVyLAogICAgICAgICAgICBkZWZhdWx0OjAuNQogICAgICAgIH0sCiAgICAgICAgZHJvcGFyZWFzOnsKICAgICAgICAgICAgcmVxdWlyZWQ6ZmFsc2UsCiAgICAgICAgICAgIHR5cGU6QXJyYXksCiAgICAgICAgICAgIGRlZmF1bHQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZHJvcHBpbmdfZWxlbWVudDp7CiAgICAgICAgICAgIHJlcXVpcmVkOmZhbHNlLAogICAgICAgICAgICB0eXBlOkZ1bmN0aW9uLAogICAgICAgICAgICBkZWZhdWx0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICBkaXYuc3R5bGUuY3NzVGV4dCA9ICdoZWlnaHQ6MjBweDtib3JkZXI6ZGFzaGVkIDJweCAjYWZhZmFmJzsKICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCd2dWUtZHJvcHBpbmctZ2hvc3QnKTsKICAgICAgICAgICAgICAgIHJldHVybiBkaXY7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGRyb3BfZ2hvc3Q6eyAvL2RyYWcgYnV0IGFmdGVyIHlvdSBkcm9wLCByZXR1cm4gdG8gaXRzIGZpcnN0IHBvc2l0aW9uCiAgICAgICAgICAgIHJlcXVpcmVkOmZhbHNlLAogICAgICAgICAgICB0eXBlOkJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQ6ZmFsc2UKICAgICAgICB9LAogICAgICAgIGNvbnRhaW5tZW50OnsKICAgICAgICAgICAgcmVxdWlyZWQ6ZmFsc2UsCiAgICAgICAgICAgIHR5cGU6U3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0Oidib2R5JwogICAgICAgIH0KICAgIH0sCiAgICBkYXRhKCl7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZG9tRWxlbWVudDpudWxsLCAvL3doaWNoIG9uZSB0byBkcmFnCiAgICAgICAgICAgIGRyYWdFbGVtZW50Om51bGwsCiAgICAgICAgICAgIGNsb25lRWxlbWVudDpudWxsLAogICAgICAgICAgICBkb21IYW5kbGU6bnVsbCwgLy9mcm9tIHdoZXJlIHRvIGRyYWcKICAgICAgICAgICAgZHJvcHBpbmdFbGVtZW50Om51bGwsCiAgICAgICAgICAgIGNvbnRhaW5tZW50RWxlbWVudDpudWxsLAogICAgICAgICAgICBjb250YWlubWVudFJlY3Q6bnVsbCwKICAgICAgICAgICAgb3JpZ2luYWxfdGFyZ2V0Om51bGwsCiAgICAgICAgICAgIG9yZ2luYWxfaGFuZGxlOm51bGwsCiAgICAgICAgICAgIGlzRHJhZ2dpbmc6ZmFsc2UsCiAgICAgICAgICAgIGRyYWdTdGFydFg6LTEsCiAgICAgICAgICAgIGRyYWdTdGFydFk6LTEsCiAgICAgICAgICAgIGVsZW1lbnRYOi0xLAogICAgICAgICAgICBlbGVtbmVudFk6LTEsCiAgICAgICAgICAgIGVsZW1lbnREaWZmWDowLAogICAgICAgICAgICBlbGVtZW50RGlmZlk6MCwKICAgICAgICAgICAgaXNEcm9wcGFibGU6ZmFsc2UsIC8vIGlmIHdlIGhhdmUgZHJvcGFyZWFzIHRoYW4gaXQgaXMgYSBkcm9wcGFibGUKICAgICAgICAgICAgZHJvcHBlZF9hcmVhOm51bGwsLy90aGUgYWJvdXQgdG8gZHJvcCBhcmVhCiAgICAgICAgICAgIGRyb3BfYXJlYXM6W10sCiAgICAgICAgICAgIGNzc1Bvc2l0aW9uOicnCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIGRyYWdTdGFydGVkKGV2ZW50KXsKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBpZiggKGV2ZW50LndoaWNoICYmIGV2ZW50LndoaWNoPT0zKSB8fCAoZXZlbnQuYnV0dG9uICYmIGV2ZW50LmJ1dHRvbj09Mikpey8vc2hvdWxkIG5vdCBkZXRlY3QgcmlnaHQgY2xpY2tzIGFzIG1vdXNlZG93biBmb3IgZHJhZ2dpbmcKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5pc0Ryb3BwYWJsZSA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmRyb3BwZWRfYXJlYSA9IG51bGw7CgogICAgICAgICAgICB0aGlzLmRyYWdTdGFydFggPSBldmVudC50b3VjaGVzICYmIGV2ZW50LnRvdWNoZXMubGVuZ3RoPjA/ZXZlbnQudG91Y2hlc1swXS5wYWdlWDpldmVudC5wYWdlWDsKICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnRZID0gZXZlbnQudG91Y2hlcyAmJiBldmVudC50b3VjaGVzLmxlbmd0aD4wP2V2ZW50LnRvdWNoZXNbMF0ucGFnZVk6ZXZlbnQucGFnZVk7CiAgICAgICAgICAgIHRoaXMuJHZkcmFnZ2FibGUuY3VycmVudCA9IHRoaXM7CgogICAgICAgICAgICB2YXIgZGltID0gdGhpcy5kc0RvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgdGhpcy5lbGVtZW50WCA9IGRpbS5sZWZ0OwogICAgICAgICAgICB0aGlzLmVsZW1lbnRZID0gZGltLnRvcDsKICAgICAgICAgICAgdGhpcy5lbGVtZW50RGlmZlggPSBldmVudC5wYWdlWCAtIGRpbS5sZWZ0OwogICAgICAgICAgICB0aGlzLmVsZW1lbnREaWZmWSA9IGV2ZW50LnBhZ2VZIC0gZGltLnRvcDsKCiAgICAgICAgICAgIHRoaXMuY29udGFpbm1lbnRSZWN0ID0gdGhpcy5jb250YWlubWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLHRoaXMuZHJhZ01vdmUpCiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsdGhpcy5kcmFnTW92ZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLHRoaXMuZHJhZ0VuZCk7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJyx0aGlzLmRyYWdFbmQpOwogICAgICAgIH0sCiAgICAgICAgZHJhZ01vdmUoZXZlbnQpewogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgdGhpcy5kcm9wcGVkX2FyZWEgPSBudWxsOwogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBhZ2VYID0gZXZlbnQudG91Y2hlcyAmJiBldmVudC50b3VjaGVzLmxlbmd0aD4wP2V2ZW50LnRvdWNoZXNbMF0ucGFnZVg6ZXZlbnQucGFnZVg7CiAgICAgICAgICAgIHZhciBwYWdlWSA9IGV2ZW50LnRvdWNoZXMgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGg+MD9ldmVudC50b3VjaGVzWzBdLnBhZ2VZOmV2ZW50LnBhZ2VZOwogICAgICAgICAgICB2YXIgZGlmZlggPSBwYWdlWCAtIHRoaXMuZHJhZ1N0YXJ0WDsKICAgICAgICAgICAgdmFyIGRpZmZZID0gcGFnZVkgLSB0aGlzLmRyYWdTdGFydFk7CiAgICAgICAgICAgIGlmKHRoaXMuYXhpcz09J3h5JyAmJiAoTWF0aC5hYnMoZGlmZlgpPnRoaXMub2Zmc2V0IHx8IE1hdGguYWJzKGRpZmZZKT50aGlzLm9mZnNldCApICl7CiAgICAgICAgICAgICAgICB0aGlzLmlzRHJhZ2dpbmcgPSB0cnVlOwogICAgICAgICAgICB9ZWxzZSBpZih0aGlzLmF4aXM9PSd4JyAmJiBNYXRoLmFicyhkaWZmWCk+dGhpcy5vZmZzZXQpewogICAgICAgICAgICAgICAgdGhpcy5pc0RyYWdnaW5nID0gdHJ1ZTsKICAgICAgICAgICAgfWVsc2UgaWYodGhpcy5heGlzPT0neScgJiYgTWF0aC5hYnMoZGlmZlkpPnRoaXMub2Zmc2V0KXsKICAgICAgICAgICAgICAgIHRoaXMuaXNEcmFnZ2luZyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodGhpcy5pc0RyYWdnaW5nKXsKICAgICAgICAgICAgICAgIGlmKHRoaXMuZHJhZ0VsZW1lbnQ9PW51bGwpewogICAgICAgICAgICAgICAgICAgIC8vZmlyc3QgdGltZSB3ZSBlbnRlciBoZXJlIHdoZW4gaXNEcmFnZ2luZyBiZWNhbWUgdHJ1ZSBmb3IgZmlyc3QgdGltZQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RHJvcEFyZWFzKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZih0aGlzLmNsb25lICYmIHRoaXMuZHJhZ0VsZW1lbnQ9PW51bGwpewogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuY2xvbmVfZWxlbWVudCE9bnVsbCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0VsZW1lbnQgPSB0aGlzLmNsb25lX2VsZW1lbnQoe2luc3RhbmNlOnRoaXMsZWw6IHRoaXMuZHNEb219KTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpbSA9IHRoaXMuZHNEb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0VsZW1lbnQgPSB0aGlzLmRzRG9tLmNsb25lTm9kZSh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnRWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gdGhpcy5jbG9uZV9vcGFjaXR5OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdFbGVtZW50LnN0eWxlLnBvc2l0aW9uPSdhYnNvbHV0ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0VsZW1lbnQuc3R5bGUubGVmdCA9IGRpbS5sZWZ0KydweCc7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0VsZW1lbnQuc3R5bGUudG9wID0gZGltLnRvcCsncHgnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZHJhZ0VsZW1lbnQpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdkcmFnX3N0YXJ0ZWQnLHtpbnN0YW5jZTp0aGlzLGRyYWdFbGVtZW50OiB0aGlzLmRyYWdFbGVtZW50LCBjbG9uZTogdGhpcy5jbG9uZX0pCiAgICAgICAgICAgICAgICB9ZWxzZSBpZih0aGlzLmRyYWdFbGVtZW50PT1udWxsKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdFbGVtZW50ID0gdGhpcy5kc0RvbTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdkcmFnX3N0YXJ0ZWQnLHtpbnN0YW5jZTp0aGlzLGRyYWdFbGVtZW50OiB0aGlzLmRyYWdFbGVtZW50LCBjbG9uZTp0aGlzLmNsb25lfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0VsZW1lbnQuc3R5bGUucG9zaXRpb249J2Fic29sdXRlJzsKCiAgICAgICAgICAgICAgICB2YXIgZmluYWxYID0gcGFnZVggLSB0aGlzLmVsZW1lbnREaWZmWDsKICAgICAgICAgICAgICAgIHZhciBmaW5hbFkgPSBwYWdlWSAtIHRoaXMuZWxlbWVudERpZmZZOwoKICAgICAgICAgICAgICAgIC8vY2hlY2sgdGhlIGNvbnRhaW5tZW50LCBpZiB3ZSBhcmUgaW5zaWRlIHRoZSBib3VuZHMgb2YgcGVybWl0dGVkIGRyYWdnaW5nIGFyZWEKICAgICAgICAgICAgICAgIGlmKGZpbmFsWDx0aGlzLmNvbnRhaW5tZW50UmVjdC5sZWZ0IHx8IGZpbmFsWCt0aGlzLmRyYWdFbGVtZW50Lm9mZnNldFdpZHRoPnRoaXMuY29udGFpbm1lbnRSZWN0LmxlZnQrdGhpcy5jb250YWlubWVudFJlY3Qud2lkdGgKICAgICAgICAgICAgfHwgZmluYWxZPHRoaXMuY29udGFpbm1lbnRSZWN0LnRvcCB8fCBmaW5hbFkrdGhpcy5kcmFnRWxlbWVudC5vZmZzZXRIZWlnaHQ+dGhpcy5jb250YWlubWVudFJlY3QudG9wK3RoaXMuY29udGFpbm1lbnRSZWN0LmhlaWdodCl7CiAgICAgICAgICAgICAgICByZXR1cm47Ly9kbyBub3QgZHJhZyBvdXRzaWRlIGNvbnRhaW5tZW50CiAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkaWZmWCwgZGlmZlkpOwogICAgICAgICAgICAgICAgaWYodGhpcy5heGlzPT0neHknIHx8IHRoaXMuYXhpcz09J3gnKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdFbGVtZW50LnN0eWxlLmxlZnQgPSBmaW5hbFgrJ3B4JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKHRoaXMuYXhpcz09J3h5JyB8fCB0aGlzLmF4aXM9PSd5Jyl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnRWxlbWVudC5zdHlsZS50b3AgPSBmaW5hbFkrJ3B4JzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdkcmFnZ2luZycse2luc3RhbmNlOnRoaXMsIGRyYWdFbGVtZW50OiB0aGlzLmRyYWdFbGVtZW50LCBjbG9uZTogdGhpcy5jbG9uZSwgY29vcmRzOnt4OmZpbmFsWCx5OmZpbmFsWX0sbmF0aXZlRXZlbnQ6IGV2ZW50fSkKCiAgICAgICAgICAgICAgICBpZih0aGlzLmlzRHJvcHBhYmxlKXsKICAgICAgICAgICAgICAgICAgICAvL2ZpbmQgaW4gd2hpY2ggZHJvcHBhYmxlIHdlIGFyZSBjb250YWluZWQKICAgICAgICAgICAgICAgICAgICB2YXIgaXNfY29udGFpbmVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBkPTA7ZDx0aGlzLmRyb3BfYXJlYXMubGVuZ3RoO2QrKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcm9wX2FyZWEgPSB0aGlzLmRyb3BfYXJlYXNbZF07CiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZHJvcF9hcmVhKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRyYWdnYWJsZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGZpbmFsWCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogZmluYWxZLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuZHJhZ0VsZW1lbnQub2Zmc2V0V2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZHJhZ0VsZW1lbnQub2Zmc2V0SGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmNvbnRhaW5zKGRyb3BfYXJlYSxkcmFnZ2FibGUpKXsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2NvbnRhaW5lZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wX2FyZWEuZWwuY2xhc3NMaXN0LmFkZCgndnVlLWRyb3BwaW5nJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3BwZWRfYXJlYSA9IGRyb3BfYXJlYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgd2UgaGF2ZSBub3QgbWFya2VkIGFzIGFjdGl2ZSBkcm9wIGFyZWEsIG1hcmsgaXQgKHNvIHdlIGRvIG5vdCBzZW5kIG5vbmUgc3RvcCBkcm9wIGVudGVyIGV2ZW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbHNvIHdlIGRvIG5vdCBuZWVkIHRvIHJlY3JlYXRlIHRoZSBnaG9zdCBkcm9wcGluZ19lbGVtZW50IGFnYWluIGFuZCBhZ2Fpbiwgb25lIHRpbWUgaXMgZW5vdWdodAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWRyb3BfYXJlYS5hY3RpdmUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3BfYXJlYS5hY3RpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3BfYXJlYS5jcmVhdGVEcm9wcGluZ0VsZW1lbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdkcm9wX2VudGVyJyx7aW5zdGFuY2U6dGhpcywgZHJhZ0VsZW1lbnQ6dGhpcy5kcmFnRWxlbWVudCxjbG9uZTp0aGlzLmNsb25lLGFyZWFFbGVtZW50OiBkcm9wX2FyZWEuZWx9KTsgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcm9wX2FyZWFzW2RdID0gZHJvcF9hcmVhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZHJvcHBpbmcnLHtpbnN0YW5jZTp0aGlzLCBkcmFnRWxlbWVudDp0aGlzLmRyYWdFbGVtZW50LCBjbG9uZTp0aGlzLmNsb25lLCBhcmVhRWxlbWVudDogZHJvcF9hcmVhLmVsfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfY29udGFpbmVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRyb3BfYXJlYS5hY3RpdmUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRyb3BfYXJlYS5kcm9wcGluZ19lbGVtZW50IT1udWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcF9hcmVhLmVsLnJlbW92ZUNoaWxkKGRyb3BfYXJlYS5kcm9wcGluZ19lbGVtZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcF9hcmVhLmRyb3BwaW5nX2VsZW1lbnQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdkcm9wX2V4aXQnLHtpbnN0YW5jZTp0aGlzLCBkcmFnRWxlbWVudDp0aGlzLmRyYWdFbGVtZW50LCBjbG9uZTp0aGlzLmNsb25lLCBhcmVhRWxlbWVudDogZHJvcF9hcmVhLmVsfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcF9hcmVhLmFjdGl2ZT0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcm9wX2FyZWFzW2RdID0gZHJvcF9hcmVhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcF9hcmVhLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Z1ZS1kcm9wcGluZycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKi8KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9Ly9mb3IKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY29udGFpbmVkJyxpc19jb250YWluZWQpOwogICAgICAgICAgICAgICAgICAgIC8vbG9vcCB0aHJvdWdoIGFsbCB0aGUgZHJvcF9hcmVhcyBhbmQgYW55IGRyb3BfYXJlYSB0aGF0IGlzIG5vdCBjdXJyZW50bHkgYWN0aXZlCiAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgaXRzIGFjdGl2ZSBzdGF0ZSBhbmQgcmVtb3ZlIGFsc28gYW55IGdob3N0IGRyb3BwaW5nIGVsZW1lbnQKICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGRkPTA7ZGQ8dGhpcy5kcm9wX2FyZWFzLmxlbmd0aDtkZCsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5kcm9wX2FyZWFzW2RkXSE9dGhpcy5kcm9wcGVkX2FyZWEgJiYgdGhpcy5kcm9wX2FyZWFzW2RkXS5hY3RpdmUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcm9wX2FyZWFzW2RkXS5lbC5jbGFzc0xpc3QucmVtb3ZlKCd2dWUtZHJvcHBpbmcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJvcF9hcmVhc1tkZF0uYWN0aXZlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3BfYXJlYXNbZGRdLnJlbW92ZURyb3BwaW5nRWxlbWVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIH0vL2lmKHRoaXMuaXNEcm9wcGFibGUpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfS8vaWYodGhpcy5pc0RyYWdnaW5nKQogICAgICAgIH0sCiAgICAgICAgZHJhZ0VuZChldmVudCl7CiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvKiogQ0hFQ0sgSUYgV0UgV0VSRSBEUkFHR0lORyB2aXMgaXNEcmFnZ2luZywgYmVjYXVzZSBtaWdodCBuZXZlciBzdGFydGVkICovCiAgICAgICAgICAgIC8vY29uc29sZS5sb2coZXZlbnQpOwogICAgICAgICAgICBpZih0aGlzLmlzRHJhZ2dpbmcpewogICAgICAgICAgICB2YXIgZHJhZ19lbGVtZW50ID0gdGhpcy5kcmFnRWxlbWVudDsKICAgICAgICAgICAgaWYodGhpcy5jbG9uZSAmJiB0aGlzLmlzRHJhZ2dpbmcpeyAvL2JlIHN1cmUgdG8gcmVtb3ZlIGNsb25lIGVsZW1lbnQgaWYgd2UgaW5kZWVkIGRyYWdnZWQKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5kcmFnRWxlbWVudCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgCiAgICAgICAgICAgIHRoaXMuZHJhZ0VsZW1lbnQgPSBudWxsOwogICAgICAgICAgICB0aGlzLmRzRG9tLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJzsKCiAgICAgICAgICAgIHZhciBwYWdlWCA9IGV2ZW50LnRvdWNoZXMgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGg+MD9ldmVudC50b3VjaGVzWzBdLnBhZ2VYOmV2ZW50LnBhZ2VYOwogICAgICAgICAgICB2YXIgcGFnZVkgPSBldmVudC50b3VjaGVzICYmIGV2ZW50LnRvdWNoZXMubGVuZ3RoPjA/ZXZlbnQudG91Y2hlc1swXS5wYWdlWTpldmVudC5wYWdlWTsKCiAgICAgICAgICAgIGlmKHRoaXMuYXhpcz09J3h5JyB8fCB0aGlzLmF4aXM9PSd4Jyl7CiAgICAgICAgICAgICAgICB0aGlzLmRzRG9tLnN0eWxlLmxlZnQgPSBwYWdlWCAtIHRoaXMuZWxlbWVudERpZmZYKydweCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodGhpcy5heGlzPT0neHknIHx8IHRoaXMuYXhpcz09J3knKXsKICAgICAgICAgICAgICAgIHRoaXMuZHNEb20uc3R5bGUudG9wID0gcGFnZVkgLSB0aGlzLmVsZW1lbnREaWZmWSsncHgnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKHRoaXMuaXNEcm9wcGFibGUgJiYgdGhpcy5kcm9wcGVkX2FyZWEhPW51bGwpewogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZHJvcHBlZCcse2luc3RhbmNlOnRoaXMsYXJlYUVsZW1lbnQ6dGhpcy5kcm9wcGVkX2FyZWEuZWwsZHJhZ0VsZW1lbnQ6ZHJhZ19lbGVtZW50LGNsb25lOnRoaXMuY2xvbmV9KQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2Ryb3BwZWQgdG9vJyk7CgoKICAgICAgICAgICAgICAgIC8vdGhpcy5kcm9wcGVkX2FyZWEuZWwuY2xhc3NMaXN0LnJlbW92ZSgndnVlLWRyb3BwaW5nJyk7CgogICAgICAgICAgICAgICAgLy9yZW1vdmUgdGhlIGRyb3BwaW5nX2VsZW1lbnQKICAgICAgICAgICAgICAgIC8vdGhpcy5kcm9wcGVkX2FyZWEuZWwucmVtb3ZlQ2hpbGQodGhpcy5kcm9wcGVkX2FyZWEuZHJvcHBpbmdfZWxlbWVudCk7CiAgICAgICAgICAgICAgICAvL2lmIHdlIGFyZSBhY3RpbmcgYXMgYSBnaG9zdCB0aGVuIGRvIG5vdCBhcHBlbmQgdGhlIGVsZW1lbnQgaW4gdGhlIGRyb3BwYWJsZSBhcmVhIGFuZCByZXR1cm4gaXQKICAgICAgICAgICAgICAgIC8vdG8gaXRzIHByZXZpb3VzIHBvc2l0aW9uLCB3ZSBhcmUgcmVzcG9uc2libGUgdG8gY3JlYXRlIHRoZSBlbGVtZW50IHdlIHdhbnQgaW4gdGhlIGRyb3BwZWQgYXJlYQogICAgICAgICAgICAgICAgaWYoIXRoaXMuZHJvcF9naG9zdCl7CiAgICAgICAgICAgICAgICAgICAvLyBhbGVydCgnZG9uZScpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZHJvcHBlZF9hcmVhLmVsLmFwcGVuZENoaWxkKHRoaXMuZHNEb20pOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZHNEb20uc3R5bGUucG9zaXRpb24gPSB0aGlzLmNzc1Bvc2l0aW9uOwogICAgICAgICAgICAgICAgfWVsc2UgaWYodGhpcy5kcm9wX2dob3N0KXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRzRG9tLnN0eWxlLnBvc2l0aW9uID0gdGhpcy5jc3NQb3NpdGlvbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2UgaWYodGhpcy5pc0Ryb3BwYWJsZSl7CiAgICAgICAgICAgICAgICAvL3JldHVybiB0byBwcmV2aW91cyBwb3NpdGlvbgogICAgICAgICAgICAgICAgdGhpcy5kc0RvbS5zdHlsZS5wb3NpdGlvbiA9IHRoaXMuY3NzUG9zaXRpb247CiAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5pc0Ryb3BwYWJsZSA9IGZhbHNlOwogICAgICAgICAgICAvL3RoaXMuaXNEcmFnZ2luZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmRyb3BwZWRfYXJlYSA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2RyYWdfZW5kZWQnKTsKICAgICAgICAgICAgdGhpcy5yZXNldERyb3BBcmVhcygpOwogICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLHRoaXMuZHJhZ01vdmUpOwogICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJyx0aGlzLmRyYWdFbmQpOwogICAgICAgIH0sCiAgICAgICAgc2V0dXBFdmVudEhhbmRsZXJzKCl7CiAgICAgICAgICAgIHRoaXMuZHNEb20uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyx0aGlzLmRyYWdTdGFydGVkKQogICAgICAgICAgICB0aGlzLmRzRG9tLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLHRoaXMuZHJhZ1N0YXJ0ZWQpOwogICAgICAgICAgICB0aGlzLmRzRG9tLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsKGV2ZW50KT0+ewogICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgfSApCiAgICAgICAgfSwKICAgICAgICBnZXRJZCgpewogICAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIHJldHVybiAndmRyYWdnYWJsZS0nK2QuZ2V0TWlsbGlzZW9uZHMoKTsKICAgICAgICB9LAogICAgICAgIHJlc2V0RHJvcEFyZWFzKCl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXNldGRyb3BhcmVhcycpOwogICAgICAgICAgICBmb3IodmFyIGQ9MDtkPHRoaXMuZHJvcF9hcmVhcy5sZW5ndGg7ZCsrKXsKICAgICAgICAgICAgICAgIHRoaXMuZHJvcF9hcmVhc1tkXS5lbC5jbGFzc0xpc3QucmVtb3ZlKCd2dWUtZHJvcHBpbmcnKTsKICAgICAgICAgICAgICAgIHRoaXMuZHJvcF9hcmVhc1tkXS5hY3RpdmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIC8vZWFuIGV4byBkcm9wcGluZyBlbGVtZW50IGRpbWlvdXJnaW1lbm8sIGthdGVzdHJlcHNlIHRvCiAgICAgICAgICAgICAgICBpZih0aGlzLmRyb3BfYXJlYXNbZF0uZHJvcHBpbmdfZWxlbWVudCE9bnVsbCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcm9wX2FyZWFzW2RdLnJlbW92ZURyb3BwaW5nRWxlbWVudCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuZHJvcF9hcmVhcyA9IFtdOwogICAgICAgIH0sCiAgICAgICAgZ2V0RHJvcEFyZWFzKCl7CiAgICAgICAgICAgIHRoaXMuaXNEcm9wcGFibGUgPSBmYWxzZTsKICAgICAgICAgICAgaWYodGhpcy5kcm9wYXJlYXMubGVuZ3RoPT0wKXsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgIHZhciBhcmVhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5kcm9wYXJlYXMuam9pbignLCcpKTsKICAgICAgICAgICB2YXIgbWUgPSB0aGlzOwogICAgICAgICAgIFtdLmZvckVhY2guY2FsbChhcmVhcyxmdW5jdGlvbihlbCl7CiAgICAgICAgICAgICAgIHZhciBkcm9wID0gewogICAgICAgICAgICAgICAgICAgZWw6IGVsLAogICAgICAgICAgICAgICAgICAgZGltOiBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwKICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICBkcm9wcGluZ19lbGVtZW50Om51bGwsIC8vaG9sZHMgYSByZWZlcmVuY2UgdG8gZHJvcHBpbmcgZWxlbWVudCBpbiBvcmRlciB0byByZW1vdmUgaXQKICAgICAgICAgICAgICAgICAgIHJlbW92ZURyb3BwaW5nRWxlbWVudDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuZHJvcHBpbmdfZWxlbWVudCE9bnVsbCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWwucmVtb3ZlQ2hpbGQodGhpcy5kcm9wcGluZ19lbGVtZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcm9wcGluZ19lbGVtZW50ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgY3JlYXRlRHJvcHBpbmdFbGVtZW50OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcm9wcGluZ19lbGVtZW50ID0gbWUuZHJvcHBpbmdfZWxlbWVudCgpOwogICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5kcm9wcGluZ19lbGVtZW50KTsKICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgbWUuZHJvcF9hcmVhcy5wdXNoKGRyb3ApOwogICAgICAgICAgIH0pCiAgICAgICAgICAgaWYodGhpcy5kcm9wX2FyZWFzLmxlbmd0aD4wKXsKICAgICAgICAgICAgICAgdGhpcy5pc0Ryb3BwYWJsZSA9IHRydWU7CiAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY29udGFpbnMoZHJvcHBhYmxlLGRyYWdnYWJsZSl7CiAgICAgICAgICAgIHZhciBkaW0gPSBkcm9wcGFibGUuZGltOwogICAgICAgICAgIAogICAgICAgICAgICBpZihkaW0ubGVmdDxkcmFnZ2FibGUubGVmdCsoZHJhZ2dhYmxlLndpZHRoLzEuNSkgJiYgZGltLmxlZnQrZGltLndpZHRoPmRyYWdnYWJsZS5sZWZ0KyhkcmFnZ2FibGUud2lkdGgvMS41KSAKICAgICAgICAgICAgJiYgZGltLnRvcDxkcmFnZ2FibGUudG9wKyhkcmFnZ2FibGUuaGVpZ2h0LzEuNSkgJiYgZGltLnRvcCtkaW0uaGVpZ2h0PmRyYWdnYWJsZS50b3ArKGRyYWdnYWJsZS5oZWlnaHQvMS41KSl7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCl7CiAgICAgICAgaWYodHlwZW9mIHRoaXMuJHZkcmFnZ2FibGU9PSd1bmRlZmluZWQnKXsKICAgICAgICAgICAgVnVlLnByb3RvdHlwZS4kdmRyYWdnYWJsZSA9IFZ1ZS5vYnNlcnZhYmxlKHsKICAgICAgICAgICAgICAgIGNyZWF0aW9uczowLAogICAgICAgICAgICAgICAgaW5zdGFuY2VzOjAsCiAgICAgICAgICAgICAgICBpc0RyYWdnaW5nOmZhbHNlLAogICAgICAgICAgICAgICAgY3VycmVudDpudWxsCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIHRoaXMuJHZkcmFnZ2FibGUuY3JlYXRpb25zKys7CiAgICAgICAgdGhpcy4kdmRyYWdnYWJsZS5pbnN0YW5jZXMrKzsKICAgIH0sCiAgICBkZXN0cm95KCl7CiAgICAgICAgdGhpcy4kdmRyYWdnYWJsZS5pbnN0YW5jZXMtLTsKICAgICAgICB0aGlzLnJlbW92ZUV2ZW50SGFuZGxlcnMoKTsKICAgIH0sCiAgICBtb3VudGVkKCl7CiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLiRzbG90cy5kZWZhdWx0KTsKICAgICAgICBpZih0eXBlb2YgdGhpcy4kc2xvdHMuZGVmYXVsdCE9PSd1bmRlZmluZWQnICYmIHRoaXMuJHNsb3RzLmRlZmF1bHQubGVuZ3RoPjApewogICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuJHNsb3RzLmRlZmF1bHQpOwogICAgICAgICAgICB0aGlzLmRzRG9tID0gdGhpcy4kZWw7Ly90aGlzLiRzbG90cy5kZWZhdWx0WzBdLmVsbTsKICAgICAgICB9CiAgICAgICAgaWYodGhpcy5kcmFnaGFuZGxlIT0nJyAmJiB0aGlzLmRzRG9tIT1udWxsKXsKICAgICAgICAgICAgdGhpcy5kb21IYW5kbGUgPSB0aGlzLmRzRG9tLnF1ZXJ5U2VsZWN0b3IodGhpcy5kcmFnaGFuZGxlKTsKICAgICAgICB9CiAgICAgICAgaWYodGhpcy5kcm9wYXJlYXMubGVuZ3RoPjApewogICAgICAgICAgICB0aGlzLmlzRHJvcHBhYmxlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdGhpcy5jb250YWlubWVudEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuY29udGFpbm1lbnQpOwogICAgICAgIAogICAgICAgIHRoaXMuY3NzUG9zaXRpb24gPSB0aGlzLmRzRG9tLnN0eWxlLnBvc2l0aW9uOwogICAgICAgIGNvbnNvbGUubG9nKCdnaG9zdCcsdGhpcy5kcm9wX2dob3N0KTsKICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuZHNEb20pOwogICAgICAgIHRoaXMuc2V0dXBFdmVudEhhbmRsZXJzKCk7CiAgICB9Cn0K"},{"version":3,"sources":["vue-draggable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"vue-draggable.vue","sourceRoot":".","sourcesContent":["<template>\n    <span v-if=\"tag=='span'\">\n        <slot></slot>\n    </span>\n    <li v-else-if=\"tag=='li'\">\n        <slot></slot>\n    </li>\n    <div v-else-if=\"tag=='div'\">\n        <slot></slot>\n    </div>\n    <div v-else-if=\"tag=='tr'\">\n        <slot></slot>\n    </div>\n</template>\n<script>\nimport Vue from 'vue';\nexport default{\n    name:'vue-draggable',\n    props:{\n        tag:{\n            required:false,\n            type:String,\n            default:'span'\n        },\n        zindex:{\n            required:false,\n            type:Number,\n            default:100 //what z-index to set while dragging\n        },\n        axis:{\n            required:false,\n            type:String,\n            default:'xy'\n        },\n        offset:{ //how many pixels to move to count it as dragging\n            required:false,\n            type:Number,\n            default:10\n        },\n        \n        draghandle:{\n            required:false,\n            type:String,\n            default:'' //a selector from the slot or the target\n        },\n        clone:{\n            required:false,\n            type:Boolean,\n            default:false\n        },\n        clone_element:{\n            required:false,\n            type:Function,\n            default:null\n        },\n        clone_opacity:{\n            required:false,\n            type:Number,\n            default:0.5\n        },\n        dropareas:{\n            required:false,\n            type:Array,\n            default:function(){\n                return [];\n            }\n        },\n        dropping_element:{\n            required:false,\n            type:Function,\n            default:function(){\n                var div = document.createElement('div');\n                div.style.cssText = 'height:20px;border:dashed 2px #afafaf';\n                div.classList.add('vue-dropping-ghost');\n                return div;\n            }\n        },\n        drop_ghost:{ //drag but after you drop, return to its first position\n            required:false,\n            type:Boolean,\n            default:false\n        },\n        containment:{\n            required:false,\n            type:String,\n            default:'body'\n        }\n    },\n    data(){\n        return {\n            domElement:null, //which one to drag\n            dragElement:null,\n            cloneElement:null,\n            domHandle:null, //from where to drag\n            droppingElement:null,\n            containmentElement:null,\n            containmentRect:null,\n            original_target:null,\n            orginal_handle:null,\n            isDragging:false,\n            dragStartX:-1,\n            dragStartY:-1,\n            elementX:-1,\n            elemnentY:-1,\n            elementDiffX:0,\n            elementDiffY:0,\n            isDroppable:false, // if we have dropareas than it is a droppable\n            dropped_area:null,//the about to drop area\n            drop_areas:[],\n            cssPosition:''\n        }\n    },\n    methods:{\n        dragStarted(event){\n            event.preventDefault();\n            \n\n            if( (event.which && event.which==3) || (event.button && event.button==2)){//should not detect right clicks as mousedown for dragging\n                return;\n            }\n\n            this.isDroppable = false;\n            this.dropped_area = null;\n\n            this.dragStartX = event.touches && event.touches.length>0?event.touches[0].pageX:event.pageX;\n            this.dragStartY = event.touches && event.touches.length>0?event.touches[0].pageY:event.pageY;\n            this.$vdraggable.current = this;\n\n            var dim = this.dsDom.getBoundingClientRect();\n            this.elementX = dim.left;\n            this.elementY = dim.top;\n            this.elementDiffX = event.pageX - dim.left;\n            this.elementDiffY = event.pageY - dim.top;\n\n            this.containmentRect = this.containmentElement.getBoundingClientRect();\n\n            document.addEventListener('mousemove',this.dragMove)\n            document.addEventListener('touchmove',this.dragMove);\n            document.addEventListener('mouseup',this.dragEnd);\n            document.addEventListener('touchend',this.dragEnd);\n        },\n        dragMove(event){\n            event.preventDefault();\n\n            this.dropped_area = null;\n            \n            var pageX = event.touches && event.touches.length>0?event.touches[0].pageX:event.pageX;\n            var pageY = event.touches && event.touches.length>0?event.touches[0].pageY:event.pageY;\n            var diffX = pageX - this.dragStartX;\n            var diffY = pageY - this.dragStartY;\n            if(this.axis=='xy' && (Math.abs(diffX)>this.offset || Math.abs(diffY)>this.offset ) ){\n                this.isDragging = true;\n            }else if(this.axis=='x' && Math.abs(diffX)>this.offset){\n                this.isDragging = true;\n            }else if(this.axis=='y' && Math.abs(diffY)>this.offset){\n                this.isDragging = true;\n            }\n            if(this.isDragging){\n                if(this.dragElement==null){\n                    //first time we enter here when isDragging became true for first time\n                    \n                    this.getDropAreas();\n                }\n                if(this.clone && this.dragElement==null){\n                    if(this.clone_element!=null){\n                        this.dragElement = this.clone_element({instance:this,el: this.dsDom});\n                    }else{\n                        var dim = this.dsDom.getBoundingClientRect();\n                        this.dragElement = this.dsDom.cloneNode(true);\n                        this.dragElement.style.opacity = this.clone_opacity;\n                        this.dragElement.style.position='absolute';\n                        this.dragElement.style.left = dim.left+'px';\n                        this.dragElement.style.top = dim.top+'px';\n                    }\n                    document.body.appendChild(this.dragElement);\n\n                    this.$emit('drag_started',{instance:this,dragElement: this.dragElement, clone: this.clone})\n                }else if(this.dragElement==null){\n                    this.dragElement = this.dsDom;\n                    this.$emit('drag_started',{instance:this,dragElement: this.dragElement, clone:this.clone})\n                }\n                this.dragElement.style.position='absolute';\n\n                var finalX = pageX - this.elementDiffX;\n                var finalY = pageY - this.elementDiffY;\n\n                //check the containment, if we are inside the bounds of permitted dragging area\n                if(finalX<this.containmentRect.left || finalX+this.dragElement.offsetWidth>this.containmentRect.left+this.containmentRect.width\n            || finalY<this.containmentRect.top || finalY+this.dragElement.offsetHeight>this.containmentRect.top+this.containmentRect.height){\n                return;//do not drag outside containment\n            }\n\n\n                //console.log(diffX, diffY);\n                if(this.axis=='xy' || this.axis=='x'){\n                    this.dragElement.style.left = finalX+'px';\n                }\n                if(this.axis=='xy' || this.axis=='y'){\n                    this.dragElement.style.top = finalY+'px';\n                }\n\n                this.$emit('dragging',{instance:this, dragElement: this.dragElement, clone: this.clone, coords:{x:finalX,y:finalY},nativeEvent: event})\n\n                if(this.isDroppable){\n                    //find in which droppable we are contained\n                    var is_contained = false;\n                    for(var d=0;d<this.drop_areas.length;d++){\n                        var drop_area = this.drop_areas[d];\n                        //console.log(drop_area);\n                        var draggable = {\n                            left: finalX,\n                            top: finalY,\n                            width: this.dragElement.offsetWidth,\n                            height: this.dragElement.offsetHeight\n                        };\n                        \n                        if(this.contains(drop_area,draggable)){ \n                            \n                            is_contained = true;\n                            drop_area.el.classList.add('vue-dropping');\n                            this.dropped_area = drop_area;\n                            //if we have not marked as active drop area, mark it (so we do not send none stop drop enter event)\n                            //also we do not need to recreate the ghost dropping_element again and again, one time is enought\n                            if(!drop_area.active){\n                                drop_area.active = true;\n                                drop_area.createDroppingElement();\n                                this.$emit('drop_enter',{instance:this, dragElement:this.dragElement,clone:this.clone,areaElement: drop_area.el});    \n                                this.drop_areas[d] = drop_area;\n                            }else{\n                                this.$emit('dropping',{instance:this, dragElement:this.dragElement, clone:this.clone, areaElement: drop_area.el});\n                            }\n                        }else{\n                            is_contained = false;\n                            /**\n                            if(drop_area.active){\n                                if(drop_area.dropping_element!=null){\n                                    drop_area.el.removeChild(drop_area.dropping_element);\n                                    drop_area.dropping_element = null;\n                                }\n                                this.$emit('drop_exit',{instance:this, dragElement:this.dragElement, clone:this.clone, areaElement: drop_area.el});\n                                drop_area.active= false;\n                                this.drop_areas[d] = drop_area;\n                            }\n                            drop_area.el.classList.remove('vue-dropping')\n                            **/\n                        }\n\n                    }//for\n                    console.log('contained',is_contained);\n                    //loop through all the drop_areas and any drop_area that is not currently active\n                    //remove its active state and remove also any ghost dropping element\n                    for(var dd=0;dd<this.drop_areas.length;dd++){\n                        if(this.drop_areas[dd]!=this.dropped_area && this.drop_areas[dd].active){\n                            this.drop_areas[dd].el.classList.remove('vue-dropping');\n                            this.drop_areas[dd].active = false;\n                            this.drop_areas[dd].removeDroppingElement();\n                        }\n                    }\n                    \n\n                }//if(this.isDroppable)\n                \n            }//if(this.isDragging)\n        },\n        dragEnd(event){\n            event.preventDefault();\n            \n            /** CHECK IF WE WERE DRAGGING vis isDragging, because might never started */\n            //console.log(event);\n            if(this.isDragging){\n            var drag_element = this.dragElement;\n            if(this.clone && this.isDragging){ //be sure to remove clone element if we indeed dragged\n                document.body.removeChild(this.dragElement);\n                \n            }\n\n            \n            this.dragElement = null;\n            this.dsDom.style.position = 'absolute';\n\n            var pageX = event.touches && event.touches.length>0?event.touches[0].pageX:event.pageX;\n            var pageY = event.touches && event.touches.length>0?event.touches[0].pageY:event.pageY;\n\n            if(this.axis=='xy' || this.axis=='x'){\n                this.dsDom.style.left = pageX - this.elementDiffX+'px';\n            }\n            if(this.axis=='xy' || this.axis=='y'){\n                this.dsDom.style.top = pageY - this.elementDiffY+'px';\n            }\n            if(this.isDroppable && this.dropped_area!=null){\n                this.$emit('dropped',{instance:this,areaElement:this.dropped_area.el,dragElement:drag_element,clone:this.clone})\n                \n                \n                //console.log('dropped too');\n\n\n                //this.dropped_area.el.classList.remove('vue-dropping');\n\n                //remove the dropping_element\n                //this.dropped_area.el.removeChild(this.dropped_area.dropping_element);\n                //if we are acting as a ghost then do not append the element in the droppable area and return it\n                //to its previous position, we are responsible to create the element we want in the dropped area\n                if(!this.drop_ghost){\n                   // alert('done');\n                    this.dropped_area.el.appendChild(this.dsDom);\n                    this.dsDom.style.position = this.cssPosition;\n                }else if(this.drop_ghost){\n                    this.dsDom.style.position = this.cssPosition;\n                }\n            }else if(this.isDroppable){\n                //return to previous position\n                this.dsDom.style.position = this.cssPosition;\n            }\n            }\n            this.isDragging = false;\n            this.isDroppable = false;\n            //this.isDragging = false;\n            this.dropped_area = null;\n            this.$emit('drag_ended');\n            this.resetDropAreas();\n            document.removeEventListener('mousemove',this.dragMove);\n            document.removeEventListener('mouseup',this.dragEnd);\n        },\n        setupEventHandlers(){\n            this.dsDom.addEventListener('mousedown',this.dragStarted)\n            this.dsDom.addEventListener('touchstart',this.dragStarted);\n            this.dsDom.addEventListener('dragstart',(event)=>{\n                event.preventDefault();\n            } )\n        },\n        getId(){\n            var d = new Date();\n            return 'vdraggable-'+d.getMilliseonds();\n        },\n        resetDropAreas(){\n            console.log('resetdropareas');\n            for(var d=0;d<this.drop_areas.length;d++){\n                this.drop_areas[d].el.classList.remove('vue-dropping');\n                this.drop_areas[d].active = false;\n                //ean exo dropping element dimiourgimeno, katestrepse to\n                if(this.drop_areas[d].dropping_element!=null){\n                    this.drop_areas[d].removeDroppingElement();\n                }\n            }\n            this.drop_areas = [];\n        },\n        getDropAreas(){\n            this.isDroppable = false;\n            if(this.dropareas.length==0){\n                return;\n            }\n           var areas = document.querySelectorAll(this.dropareas.join(','));\n           var me = this;\n           [].forEach.call(areas,function(el){\n               var drop = {\n                   el: el,\n                   dim: el.getBoundingClientRect(),\n                   active: false,\n                   dropping_element:null, //holds a reference to dropping element in order to remove it\n                   removeDroppingElement:function(){\n                       if(this.dropping_element!=null){\n                           this.el.removeChild(this.dropping_element);\n                           this.dropping_element = null;\n                       }\n                   },\n                   createDroppingElement:function(){\n                       this.dropping_element = me.dropping_element();\n                       this.el.appendChild(this.dropping_element);\n                   }\n               };\n               me.drop_areas.push(drop);\n           })\n           if(this.drop_areas.length>0){\n               this.isDroppable = true;\n           }\n        },\n        contains(droppable,draggable){\n            var dim = droppable.dim;\n           \n            if(dim.left<draggable.left+(draggable.width/1.5) && dim.left+dim.width>draggable.left+(draggable.width/1.5) \n            && dim.top<draggable.top+(draggable.height/1.5) && dim.top+dim.height>draggable.top+(draggable.height/1.5)){\n                return true;\n            }\n            \n            return false;\n        }\n    },\n    created(){\n        if(typeof this.$vdraggable=='undefined'){\n            Vue.prototype.$vdraggable = Vue.observable({\n                creations:0,\n                instances:0,\n                isDragging:false,\n                current:null\n            })\n        }\n        this.$vdraggable.creations++;\n        this.$vdraggable.instances++;\n    },\n    destroy(){\n        this.$vdraggable.instances--;\n        this.removeEventHandlers();\n    },\n    mounted(){\n        //console.log(this.$slots.default);\n        if(typeof this.$slots.default!=='undefined' && this.$slots.default.length>0){\n            //console.log(this.$slots.default);\n            this.dsDom = this.$el;//this.$slots.default[0].elm;\n        }\n        if(this.draghandle!='' && this.dsDom!=null){\n            this.domHandle = this.dsDom.querySelector(this.draghandle);\n        }\n        if(this.dropareas.length>0){\n            this.isDroppable = true;\n        }\n        \n        this.containmentElement = document.querySelector(this.containment);\n        \n        this.cssPosition = this.dsDom.style.position;\n        console.log('ghost',this.drop_ghost);\n        //console.log(this.dsDom);\n        this.setupEventHandlers();\n    }\n}\n</script>"]}]}